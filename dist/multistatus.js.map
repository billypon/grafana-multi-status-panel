{"version":3,"sources":["../src/multistatus.js"],"names":["MetricsPanelCtrl","moment","_","panelDefaults","color","size","MultiStatus","$scope","$injector","defaultsDeep","panel","events","on","onInitEditMode","bind","onPanelTeardown","onPanelInitialized","onDataReceived","onDataError","dataList","data","map","last","d","datapoints","target","value","clamp","render","addEditorTab","scope","elem","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,sB,kBAAAA,gB;;AACFC,Y;;AACAC,O;;;;;;;;;;;;;;;;;;;;;AAGDC,mB,GAAgB;AACpBC,eAAO,SADa;AAEpBC,cAAM;AAFc,O;;6BAKTC,W;;;AACX,6BAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,gIACvBD,MADuB,EACfC,SADe;;AAE7BN,YAAEO,YAAF,CAAe,MAAKC,KAApB,EAA2BP,aAA3B;;AAEA,gBAAKQ,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKC,cAAL,CAAoBC,IAApB,OAAjC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKG,eAAL,CAAqBD,IAArB,OAAjC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,mBAAf,EAAoC,MAAKI,kBAAL,CAAwBF,IAAxB,OAApC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,eAAf,EAAgC,MAAKK,cAAL,CAAoBH,IAApB,OAAhC;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,YAAf,EAA6B,MAAKM,WAAL,CAAiBJ,IAAjB,OAA7B;AACA,gBAAKH,MAAL,CAAYC,EAAZ,CAAe,oBAAf,EAAqC,MAAKK,cAAL,CAAoBH,IAApB,OAArC;AAT6B;AAU9B;;;;yCAEcK,Q,EAAU;AACvB;AACA;AACA,iBAAKC,IAAL,GAAYD,SAASE,GAAT,CAAa,aAAK;AAC5B,kBAAMC,OAAOC,EAAEC,UAAF,IAAgBtB,EAAEoB,IAAF,CAAOC,EAAEC,UAAT,CAA7B;AACA,qBAAO;AACLC,wBAAQF,EAAEE,MADL;AAELC,uBAAOxB,EAAEyB,KAAF,CAAQL,QAAQA,KAAK,CAAL,CAAR,IAAmB,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC;AAFF,eAAP;AAID,aANW,CAAZ;AAOA,iBAAKM,MAAL,CAAY,KAAKR,IAAjB;AACD;;;wCAGa;AACZ,mBAAO,KAAKA,IAAZ;AACA;AACA,iBAAKQ,MAAL;AACD;;;2CAEgB;AACf,iBAAKC,YAAL,CAAkB,SAAlB,EAA6B,yCAA7B,EAAwE,CAAxE;AACD;;;4CAEiB,CACjB;;;6CAEkBC,K,EAAOC,I,EAAM;AAC9B,iBAAKpB,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,aAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACD,aAPD;AAQD;;;;QAjD8BZ,gB;;;;AAoDjCM,kBAAY0B,WAAZ,GAA0B,aAA1B","file":"multistatus.js","sourcesContent":["import { MetricsPanelCtrl } from 'app/plugins/sdk';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport './css/multi-status.css!';\n\nconst panelDefaults = {\n  color: '#6495ed',\n  size: '16px'\n};\n\nexport class MultiStatus extends MetricsPanelCtrl {\n  constructor($scope, $injector) {\n    super($scope, $injector);\n    _.defaultsDeep(this.panel, panelDefaults);\n\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('panel-teardown', this.onPanelTeardown.bind(this));\n    this.events.on('panel-initialized', this.onPanelInitialized.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n  }\n\n  onDataReceived(dataList) {\n    // this.series = dataList.map(this.seriesHandler.bind(this));\n    // this.data = this.parseSeries(this.series);\n    this.data = dataList.map(d => {\n      const last = d.datapoints && _.last(d.datapoints);\n      return {\n        target: d.target,\n        value: _.clamp(last && last[0] || 0, 0, 1)\n      };\n    });\n    this.render(this.data);\n  }\n\n\n  onDataError() {\n    delete this.data;\n    //this.series = [];\n    this.render();\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Options', 'public/plugins/multi-status/editor.html', 2);\n  }\n\n  onPanelTeardown() {\n  }\n\n  onPanelInitialized(scope, elem) {\n    this.events.on('render', x => {\n      // const $panelContainer = elem.find('.panel-container');\n      // if (this.panel.bgColor) {\n      //   $panelContainer.css('background-color', this.panel.bgColor);\n      // } else {\n      //   $panelContainer.css('background-color', '');\n      // }\n    });\n  }\n}\n\nMultiStatus.templateUrl = 'module.html';\n"]}